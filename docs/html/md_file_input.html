<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using Markdown files &mdash; ColabFit Tools Documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
    <link rel="shortcut icon" href="_static/colabfit-logo.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="Property definitions" href="property_definitions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> colabfit-tools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic_example.html">Basic example</a></li>
<li class="toctree-l2"><a class="reference internal" href="qm9.html">QM9 example</a></li>
<li class="toctree-l2"><a class="reference internal" href="si_prx_gap.html">Si PRX GAP example</a></li>
<li class="toctree-l2"><a class="reference internal" href="property_definitions.html">Property definitions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Markdown files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-markdown-file">Example Markdown file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">colabfit-tools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="examples.html">Examples</a> &raquo;</li>
      <li>Using Markdown files</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/md_file_input.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="using-markdown-files">
<h1>Using Markdown files<a class="headerlink" href="#using-markdown-files" title="Permalink to this headline"></a></h1>
<p>If your data is already in <a class="reference external" href="https://wiki.fysik.dtu.dk/ase/ase/io/formatoptions.html#extxyz">Extended XYZ format</a>,
then one of the easiest ways to load it into a Dataset object is to write a
properly formatted Markdown file and use the
<a class="reference internal" href="database.html#colabfit.tools.database.MongoDatabase.dataset_from_markdown" title="colabfit.tools.database.MongoDatabase.dataset_from_markdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset_from_markdown()</span></code></a> method.
Note that any Markdown file generated by the
<a class="reference internal" href="database.html#colabfit.tools.database.MongoDatabase.dataset_to_markdown" title="colabfit.tools.database.MongoDatabase.dataset_to_markdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset_to_markdown()</span></code></a> function
should be readable by <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_markdown()</span></code>, which can make it easy to publish
and distribute Datasets.</p>
<p>An example input Markdown file can be found in
<code class="code docutils literal notranslate"><span class="pre">colabfit/examples/example.md</span></code> on the Github repository, but the contents
of that file are duplicated here for convenience:</p>
<section id="example-markdown-file">
<h2>Example Markdown file<a class="headerlink" href="#example-markdown-file" title="Permalink to this headline"></a></h2>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh"># Summary</span>

This section is ignored during parsing. It is intended to be used as a place to
display additional information about a Dataset, and will be ignored by <span class="sb">`from_markdown()`</span>.

All other sections and tables are required for use with
<span class="sb">`from_markdown()`</span> unless otherwise specified. Sections should be specified using
<span class="sb">`&lt;h1&gt;`</span> headers. Exact header spelling and capitalization is required. All table
column headers are required unless otherwise specified. Sections may be given in
different orders than shown here. Additional sections may be added, but will be
ignored by <span class="sb">`from_markdown()`</span>.

Any files should be provided as links in Markdown as described
[<span class="nt">here</span>](<span class="na">https://www.markdownguide.org/basic-syntax/#links</span>), using the format
<span class="sb">`&quot;[&lt;text&gt;](&lt;path_to_file&gt;)&quot;`</span>.


The table below will be automatically generated when using <span class="sb">`to_markdown()`</span>.

|Chemical systems|Element ratios|# of configurations|# of atoms|
|---|---|---|---|
|All chemical systems|Elements and their total concentrations|Number of configurations|Number of atoms|

This section can also include figures. These figures would typically be the
histograms generated via <span class="sb">`MongoDatabase.plot_histograms()`</span>, and will be ignored
by <span class="sb">`from_markdown()`</span>.

<span class="gh"># Name</span>

A single-line name to use for the dataset.

<span class="gh"># Authors</span>

Authors of the dataset (one per line)

<span class="gh"># Links</span>

Links to associate with the dataset (one per line)

<span class="gh"># Description</span>

A multi-line human-readable description of the dataset

<span class="gh"># Storage format</span>

A table for specifying how to load the configurations. First column of each row
(&#39;Elements&#39;, &#39;File&#39;, &#39;Format&#39;, &#39;Name field&#39;) must be as spelled/capitalized
here. If <span class="sb">`Format == &#39;mongo&#39;`</span>, then &quot;File&quot; will be the ID of the Dataset in the
Mongo Database and <span class="sb">`from_markdown()`</span> will just load the existing Dataset. Note
that <span class="sb">`&#39;mongo&#39;`</span> is the default format used by <span class="sb">`to_markdown()`</span>, but another common
option is <span class="sb">`xyz`</span>, which would export the Configurations and Properties to an
Extended XYZ file.

Columns:

<span class="k">*</span> <span class="sb">`Elements`</span>: a comma-separated list of elements. Order only matters for storage
  formats like CFG that don&#39;t include a mapping between atom number and atom
  type.
<span class="k">*</span> <span class="sb">`File`</span>: a hypyerlink to the raw data file using <span class="sb">`[&lt;file_name&gt;](&lt;file_path&gt;)`</span>
  format. If <span class="sb">`Format == &#39;mongo&#39;`</span>, this column will just be the ID of the
  existing Dataset in the Database.
<span class="k">*</span> <span class="sb">`Format`</span>: a string specifying the file format (e.g., &#39;mongo&#39;, &#39;xyz&#39;, ...)
<span class="k">*</span> <span class="sb">`Name field`</span>: the key to use with <span class="sb">`Configuration.info`</span> for accessing the name
  of the configuration (<span class="sb">`None`</span> if name is not included).

|||||
|---|---|---|---|
|Elements|File|Format|Name field|
| Mo, Ni, Cu | [<span class="nt">example.extxyz</span>](<span class="na">example.extxyz</span>) | xyz | name |

<span class="gh"># Properties</span>

This section is for storing the tabular form of the <span class="sb">`property_map`</span> argument for
the <span class="sb">`MongoDatabase.insert_data()`</span> function.

Columns:

<span class="k">*</span> <span class="sb">`Property`</span>: An OpenKIM Property Definition ID from [the list of approved OpenKIM Property
   Definitions](https://openkim.org/properties) OR a link to a local EDN file
   (using the notation <span class="sb">`[&lt;name_of_property&gt;](&lt;path_to_edn_file&gt;)`</span>) that has been
   formatted according to the [<span class="nt">KIM Properties</span>
<span class="nt">   Framework</span>](<span class="na">https://openkim.org/doc/schema/properties-framework/</span>)
<span class="k">*</span> <span class="sb">`KIM field`</span>: A string that can be used as a key for a dictionary
  representation of an OpenKIM Property Instance
<span class="k">*</span> <span class="sb">`ASE field`</span>: A string that can be used as a key for the <span class="sb">`info`</span> or <span class="sb">`arrays`</span>
  dictionary on a Configuration
<span class="k">*</span> <span class="sb">`Units`</span>: A string describing the units of the field (in an ASE-readable
  format), or <span class="sb">`None`</span> if the field is unitless

|Property|KIM field|ASE field|Units|
|---|---|---|---|
|an-existing-property|energy|energy|eV|
|an-existing-property|forces|F|eV/Ang|
|[my-custom-property](colabfit/tests/files/test_property.edn)|a-custom-field-name|field-name|None|
|[my-custom-property](colabfit/tests/files/test_property.edn)|a-custom-1d-array|1d-array|eV|
|[my-custom-property](colabfit/tests/files/test_property.edn)|a-custom-per-atom-array|per-atom-array|eV|



<span class="gh"># Property settings</span>

The tabular form of the <span class="sb">`property_settings`</span> argument to the
<span class="sb">`MongoDatabase.insert_data()`</span> function.

Columns:

<span class="k">*</span> <span class="sb">`ID`</span>: the ID of the PropertySettings if it already exists in the
  Database. This column is optional, and may be ommitted if the object does not
  exist in the Database yet
<span class="k">*</span> <span class="sb">`Property`</span>: the name of the Property
<span class="k">*</span> <span class="sb">`Method`</span>: the method used
<span class="k">*</span> <span class="sb">`Labels`</span>: labels applied to Properties linked to this PropertySettings
<span class="k">*</span> <span class="sb">`Files`</span>: files associated with Properties linked to this PropertySettings

ID|Property|Method|Description|Labels|Files|
|---|---|---|---|---|---|
|| my-custom-property | VASP | energies/forces/stresses | PBE, GGA |  |

<span class="gh"># Configuration sets</span>

A table used for building ConfigurationSets. A ConfigurationSet is built by
writing a Mongo query that returns a list of Configuration IDs to include in the
ConfigurationSet, then providing a human-readable description of the
ConfigurationSet.

Columns:

<span class="k">*</span> <span class="sb">`ID`</span>: the ID of the ConfigurationSet if it already exists in the
  Database. This column is optional, and may be ommitted if the object does not
  exist in the Database yet
<span class="k">*</span> <span class="sb">`Query`</span>: a Mongo query in dictionary format. Used by <span class="sb">`from_markdown()`</span> to
  build ConfigurationSets by obtain Configuration IDs using the query. This
  column is optional, and will not be generated by <span class="sb">`to_markdown()`</span>. Note that
  queries should not use the <span class="sb">`_id`</span> field, as this will be overwritten by
  <span class="sb">`from_markdown()`</span> in order to limit search to only newly-added Configurations
<span class="k">*</span> <span class="sb">`Description`</span>: A human-readable description of the ConfigurationSet
<span class="k">*</span> <span class="sb">`# of structures`</span>: number of structures in the ConfigurationSet. Leave blank
  for <span class="sb">`from_markdown()`</span>. Automatically populated by <span class="sb">`to_markdown()`</span>.
<span class="k">*</span> <span class="sb">`# of atoms`</span>: number of atoms in the ConfigurationSet. Leave blank
  for <span class="sb">`from_markdown()`</span>. Automatically populated by <span class="sb">`to_markdown()`</span>.

Note that when using <span class="sb">`from_markdown()`</span>, all loaded Configurations must be
contained by at least one ConfigurationSet; if any Configurations don&#39;t match
any of the queries provided here, a warning will be raised.

All other text in this section will be ignored.

ID|Query|Description|# of structures| # of atoms|
|---|---|---|---|---|
|| <span class="sb">`{&#39;names&#39;: {&#39;$regex&#39;: &#39;H20&#39;}}`</span> | AIMD snapshots of liquid water at 100K | | |

<span class="gh"># Configuration labels</span>

A table used for applying configuration labels, structured similar to the one in
the &quot;Configuration sets&quot; section. Only the &quot;Labels&quot; column is required. If
using <span class="sb">`from_markdown()`</span>, a &quot;Query&quot; column is also required, and will be used to
apply the given labels to Configurations matching the query. <span class="sb">`to_markdown()`</span>
will also create a &quot;Counts&quot; column. Labels should be given as a
comma-separated list. When using <span class="sb">`to_markdown()`</span>.

<span class="k">*</span> <span class="sb">`Query`</span>: a Mongo query in dictionary format. Used by <span class="sb">`from_markdown()`</span> to
  apply the given labels to Configurations that match the query. This
  column is optional, and will not be generated by <span class="sb">`to_markdown()`</span>. Note that
  queries should not use the <span class="sb">`_id`</span> field, as this will be overwritten by
  <span class="sb">`from_markdown()`</span> in order to limit search to only newly-added Configurations
<span class="k">*</span> <span class="sb">`Labels`</span>: labels applied to Configurations
All other text in this section will be ignored.

|Query|Labels|Counts|
|---|---|---|
| <span class="sb">`{&#39;names&#39;: {&#39;$regex&#39;: &#39;H20&#39;}}`</span> | water, molecule |  |

<span class="gh"># Figures</span>

This section is used for including any figures. This section is ignored by
<span class="sb">`from_markdown()`</span>, and is automatically populated with the results of
<span class="sb">`plot_histograms()`</span> for <span class="sb">`to_markdown()`</span>.
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="property_definitions.html" class="btn btn-neutral float-left" title="Property definitions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, ColabFit.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>